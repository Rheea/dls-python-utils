<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from hyq2max.urdf.xacro             | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="hyq2max" xmlns:xacro="http://ros.org/wiki/xacro">
  <!-- This argument allows us to load joint sensors that measure the internal wrenches -->
  <!-- The following included files set up definitions of parts of the robot body -->
  <!-- standard distances -->
  <!-- 0.194  0.34125 -->
  <!-- 0.887 1.4192-->
  <!-- Knee offset angel in degree -->
  <!-- Inertial values -->
  <!-- Trunk with hydraulic system -->
  <!-- Hip assembly -->
  <!-- Upper leg -->
  <!-- Lower leg -->
  <!-- TODO checks the imu properties -->
  <!-- Microstrain kvh1775 IMU -->
  <!-- Microstrain 3dmgx425 IMU -->
  <!-- Microstrain 3dmgx325 IMU -->
  <!-- PTU unit -->
  <!-- Asus Xtion Camera Location (Nominally 0) -->
  <!-- Kinect Camera Location (Nominally 0) -->
  <!-- Bumblebee mass and lengths for computing inertia tensor -->
  <!-- Velodyne Lidar Location (Nominally 0) -->
  <!-- HighDef Camera Location (Nominally 0) -->
  <!-- HyQ2Max torso -->
  <!-- Things that are needed only for Gazebo (not the physical robot). These include sensor and controller plugin specifications -->
  <!-- ================================ Trunk ================================ -->
  <!-- The xacro macro xacro:hyq_base contains: base and trunk -->
  <!-- HyQ2Max legs -->
  <!-- Things that are needed only for Gazebo (not the physical robot). These include sensor and controller plugin specifications -->
  <!-- ================================== Leg ================================== -->
  <!-- The xacro macro xacro:hyq2max_leg contains: hip assembly, upper and lower leg -->
  <!-- HyQ2Max sensors -->
  <!-- ============================ IMU microstrain ============================== -->
  <!-- The xacro macro xacro:microstrain_3dmgx425_imu: imu frame -->
  <!-- ===================================== ASUS & PROSILICA ==================================== -->
  <!-- The xacro macro xacro:asus_xtion_camera contains: asus xtion and prosilica combo -->
  <!-- ===================================== VELODYNE ==================================== -->
  <!-- The xacro macro xacro:velodyne contains: velodyne combo -->
  <!-- FIXME: what is this offset? -->
  <!-- ===================================== KINECT & PROSILICA ==================================== -->
  <!-- The xacro macro xacro:kinect_prosilica_camera_swept_back contains: kinect and prosilica combo -->
  <!-- Things that are needed only for Gazebo (not the physical robot). These include sensor and controller plugin specifications -->
  <!-- ================================ Bumblebee ============================== -->
  <!-- The xacro macro xacro:bumblebee contains: camera, mount and optical frame -->
  <!-- A bumblebee with a 97-degre HFOV lens -->
  <!-- A bumblebee with a 66-degre HFOV lens -->
  <!-- A bumblebee with a 43-degre HFOV lens -->
  <!-- A vislab 3dve with a 72-degre HFOV lens -->
  <!-- Generic simulator_gazebo plugins for starting mechanism control, ros time -->
  <gazebo>
    <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_controller_manager">
      <robotNamespace>/hyq2max</robotNamespace>
      <robotSimType>dls_gazebo_interface/DLSHWSim</robotSimType>
      <controlPeriod>0.004</controlPeriod>
    </plugin>
    <plugin filename="libgazebo_ros_p3d.so" name="gazebo_ros_p3d">
      <robotNamespace>/hyq2max</robotNamespace>
      <bodyName>trunk</bodyName>
      <topicName>ground_truth</topicName>
      <frameName>world</frameName>
      <xyzOffsets>0 0 0</xyzOffsets>
      <rpyOffsets>0 0 0</rpyOffsets>
      <gaussianNoise>0</gaussianNoise>
      <alwaysOn>true</alwaysOn>
      <updateRate>250.0</updateRate>
    </plugin>
  </gazebo>
  <!-- Now we can start using the macros included above to define the actual HyQ2Max -->
  <!-- The first use of a macro. This one was defined in trunk.urdf.xacro above.
A macro like this will expand to a set of link and joint definitions, and to additional
Gazebo-related extensions (sensor plugins, etc). The macro takes an argument, name,
that equals "base", and uses it to generate names for its component links and joints
(e.g., base_link). The included origin block is also an argument to the macro. By convention,
the origin block defines where the component is w.r.t its parent (in this case the parent
is the world frame). For more, see http://www.ros.org/wiki/xacro -->
  <!-- Body -->
  <!-- Trunk -->
  <!-- Floating-base Joint -->
  <joint name="floating_base" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="base_link"/>
    <child link="trunk"/>
  </joint>
  <!-- Links -->
  <!-- Footprint link -->
  <link name="base_link">
    <visual>
      <geometry>
        <cylinder length="0.01" radius="0.01"/>
      </geometry>
    </visual>
  </link>
  <!-- Trunk link -->
  <link name="trunk">
    <inertial>
      <origin xyz="0.060663 0.000598 -0.007592"/>
      <mass value="39.71"/>
      <inertia ixx="0.3020795" ixy="-0.0050854" ixz="0.0046576" iyy="4.751448" iyz="-0.0017613" izz="4.82415"/>
    </inertial>
    <visual>
      <origin rpy="1.57079632679 0 1.57079632679" xyz="0 0 0"/>
      <!-- <origin xyz="0 0 0" rpy="0 0 0" /> -->
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/trunk/trunk.dae" scale="1.0 1 1.0"/>
        <!-- <box size="1.306 0.400 0.318"/>  -->
      </geometry>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0 1.57079632679" xyz="0 0 0"/>
      <!-- <origin xyz="0 0 0" rpy="0 0 0" /> -->
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/trunk/trunk.dae" scale="1.0 1 1.0"/>
        <!-- <box size="1.306 0.400 0.318"/>  -->
      </geometry>
    </collision>
  </link>
  <!-- Extensions -->
  <gazebo reference="trunk">
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
  </gazebo>
  <!-- LF leg -->
  <!-- Joints -->
  <!-- HAA joint -->
  <joint name="lf_haa_joint" type="revolute">
    <origin rpy="3.14159265359 1.57079632679 0" xyz="0.4435 0.097 0"/>
    <parent link="trunk"/>
    <child link="lf_hipassembly"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0"/>
    <limit effort="120.0" lower="-0.698131700798" upper="0.698131700798" velocity="12.0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-0.698131700798" soft_upper_limit="0.698131700798"/>
  </joint>
  <!-- HFE joint -->
  <joint name="lf_hfe_joint" type="revolute">
    <origin rpy="1.57079632679 0 0" xyz="0 -0.117 0"/>
    <parent link="lf_hipassembly"/>
    <child link="lf_upperleg"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0"/>
    <limit effort="245.0" lower="-2.35619449019" upper="2.35619449019" velocity="12.0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-2.35619449019" soft_upper_limit="2.35619449019"/>
  </joint>
  <!-- KFE joint -->
  <joint name="lf_kfe_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.36 0 0"/>
    <parent link="lf_upperleg"/>
    <child link="lf_lowerleg"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0"/>
    <limit effort="250.0" lower="-2.91469985083" upper="-0.0349065850399" velocity="12.0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-2.91469985083" soft_upper_limit="-0.0349065850399"/>
  </joint>
  <!-- Foot joint -->
  <joint name="lf_foot_joint" type="fixed">
    <origin rpy="1.57079632679 0 -1.57079632679" xyz="0.38 0 0"/>
    <parent link="lf_lowerleg"/>
    <child link="lf_foot"/>
  </joint>
  <!-- Links -->
  <!-- Hip assembly link -->
  <link name="lf_hipassembly">
    <inertial>
      <origin xyz="-0.000605 -0.001346 0.000196"/>
      <mass value="3.54"/>
      <inertia ixx="0.007379" ixy="-5.3e-05" ixz="1.7e-05" iyy="0.004284" iyz="3e-05" izz="0.00709"/>
    </inertial>
    <visual>
      <origin rpy="0 -1.57079632679 -1.57079632679" xyz="0 -0.046 0"/>
      <geometry>
        <!-- <mesh filename="package://hyq2max_description/meshes/leg/hipassembly.dae" scale="1 1 1"/> -->
        <cylinder length="0.117" radius="0.0444"/>
      </geometry>
      <!-- <material name="black"/> -->
    </visual>
    <collision>
      <origin rpy="0 -1.57079632679 -1.57079632679" xyz="0 -0.046 0"/>
      <geometry>
        <!-- <mesh filename="package://hyq2max_description/meshes/leg/hipassembly.dae" scale="1 1 1"/> -->
        <cylinder length="0.117" radius="0.0444"/>
      </geometry>
    </collision>
  </link>
  <!-- 		<gazebo reference="${name}_hipassembly">
            		<material>Gazebo/Black</material>
	        </gazebo> -->
  <!-- Upper leg link -->
  <link name="lf_upperleg">
    <inertial>
      <origin xyz="0.144296 -0.002071 -0.005094"/>
      <mass value="4.95"/>
      <inertia ixx="0.010196" ixy="-0.00232" ixz="-0.000141" iyy="0.204183" iyz="3.4e-05" izz="0.207532"/>
    </inertial>
    <visual>
      <origin rpy="0.0 0 0" xyz="0 0 -0.03"/>
      <!-- <origin xyz="0.180 0 0" rpy="0 0 0"/> -->
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
        <!-- <box size="0.360 0.116 0.07"/> -->
        <!-- <cylinder length="0.360" radius="0.07"/> -->
      </geometry>
    </visual>
    <collision>
      <origin rpy="0.0 0 0" xyz="0 0 -0.03"/>
      <!-- <origin xyz="0.180 0 0" rpy="0 0 0"/> -->
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
        <!-- <box size="0.360 0.116 0.07"/> -->
        <!-- <cylinder length="0.360" radius="0.07"/> -->
      </geometry>
    </collision>
  </link>
  <!-- Lower leg link -->
  <link name="lf_lowerleg">
    <inertial>
      <origin xyz="0.109015 0.042147 0.000219"/>
      <mass value="1.71"/>
      <inertia ixx="0.006848" ixy="0.011981" ixz="8e-06" iyy="0.055957" iyz="1.2e-05" izz="0.059397"/>
    </inertial>
    <visual>
      <origin rpy="0.0 0 2.96705972839" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0.0 0 2.96705972839" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Foot link -->
  <link name="lf_foot">
    <inertial>
      <origin xyz="0 0 0"/>
      <mass value="0.0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <visual>
      <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <sphere radius="0.021"/>
      </geometry>
      <!-- <material name="black"/> -->
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
    </collision>
  </link>
  <!--                 <gazebo reference="${name}_foot">
                	<material>Gazebo/Black</material>
                </gazebo> -->
  <!-- Extensions -->
  <!-- Hip assembly -->
  <transmission name="lf_haa_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lf_haa_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lf_haa_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Upper leg -->
  <transmission name="lf_hfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lf_hfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lf_hfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Lower leg -->
  <transmission name="lf_kfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lf_kfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lf_kfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="lf_haa_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="lf_kfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="lf_hfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="lf_upperleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="lf_lowerleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="lf_foot">
    <sensor name="lf_foot_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>1000.0</update_rate>
      <contact>
        <collision>lf_foot_collision</collision>
      </contact>
      <plugin filename="libgazebo_ros_bumper.so" name="lf_foot_bumper">
        <bumperTopicName>/lf_grf</bumperTopicName>
        <frameName>base_link</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <!-- RF leg -->
  <!-- Joints -->
  <!-- HAA joint -->
  <joint name="rf_haa_joint" type="revolute">
    <origin rpy="0 1.57079632679 0" xyz="0.4435 -0.097 0"/>
    <parent link="trunk"/>
    <child link="rf_hipassembly"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0"/>
    <limit effort="120.0" lower="-0.698131700798" upper="0.698131700798" velocity="12.0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-0.698131700798" soft_upper_limit="0.698131700798"/>
  </joint>
  <!-- HFE joint -->
  <joint name="rf_hfe_joint" type="revolute">
    <origin rpy="-1.57079632679 0 0" xyz="0 -0.117 0"/>
    <parent link="rf_hipassembly"/>
    <child link="rf_upperleg"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0"/>
    <limit effort="245.0" lower="-2.35619449019" upper="2.35619449019" velocity="12.0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-2.35619449019" soft_upper_limit="2.35619449019"/>
  </joint>
  <!-- KFE joint -->
  <joint name="rf_kfe_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.36 0 0"/>
    <parent link="rf_upperleg"/>
    <child link="rf_lowerleg"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0"/>
    <limit effort="250.0" lower="-2.91469985083" upper="-0.0349065850399" velocity="12.0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-2.91469985083" soft_upper_limit="-0.0349065850399"/>
  </joint>
  <!-- Foot joint -->
  <joint name="rf_foot_joint" type="fixed">
    <origin rpy="1.57079632679 0 -1.57079632679" xyz="0.38 0 0"/>
    <parent link="rf_lowerleg"/>
    <child link="rf_foot"/>
  </joint>
  <!-- Links -->
  <!-- Hip assembly link -->
  <link name="rf_hipassembly">
    <inertial>
      <origin xyz="-0.000605 -0.001346 0.000196"/>
      <mass value="3.54"/>
      <inertia ixx="0.007379" ixy="-5.3e-05" ixz="1.7e-05" iyy="0.004284" iyz="3e-05" izz="0.00709"/>
    </inertial>
    <visual>
      <origin rpy="0 -1.57079632679 -1.57079632679" xyz="0 -0.046 0"/>
      <geometry>
        <!-- <mesh filename="package://hyq2max_description/meshes/leg/hipassembly.dae" scale="1 1 1"/> -->
        <cylinder length="0.117" radius="0.0444"/>
      </geometry>
      <!-- <material name="black"/> -->
    </visual>
    <collision>
      <origin rpy="0 -1.57079632679 -1.57079632679" xyz="0 -0.046 0"/>
      <geometry>
        <!-- <mesh filename="package://hyq2max_description/meshes/leg/hipassembly.dae" scale="1 1 1"/> -->
        <cylinder length="0.117" radius="0.0444"/>
      </geometry>
    </collision>
  </link>
  <!-- 		<gazebo reference="${name}_hipassembly">
            		<material>Gazebo/Black</material>
	        </gazebo> -->
  <!-- Upper leg link -->
  <link name="rf_upperleg">
    <inertial>
      <origin xyz="0.144296 -0.002071 0.005094"/>
      <mass value="4.95"/>
      <inertia ixx="0.010196" ixy="-0.00232" ixz="0.000141" iyy="0.204183" iyz="-3.4e-05" izz="0.207532"/>
    </inertial>
    <visual>
      <origin rpy="3.14159265359 0 0" xyz="0 0 0.03"/>
      <!-- <origin xyz="0.180 0 0" rpy="0 0 0"/> -->
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
        <!-- <box size="0.360 0.116 0.07"/> -->
        <!-- <cylinder length="0.360" radius="0.07"/> -->
      </geometry>
    </visual>
    <collision>
      <origin rpy="3.14159265359 0 0" xyz="0 0 0.03"/>
      <!-- <origin xyz="0.180 0 0" rpy="0 0 0"/> -->
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
        <!-- <box size="0.360 0.116 0.07"/> -->
        <!-- <cylinder length="0.360" radius="0.07"/> -->
      </geometry>
    </collision>
  </link>
  <!-- Lower leg link -->
  <link name="rf_lowerleg">
    <inertial>
      <origin xyz="0.109015 0.042147 0.000219"/>
      <mass value="1.71"/>
      <inertia ixx="0.006848" ixy="0.011981" ixz="8e-06" iyy="0.055957" iyz="1.2e-05" izz="0.059397"/>
    </inertial>
    <visual>
      <origin rpy="0.0 0 2.96705972839" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0.0 0 2.96705972839" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Foot link -->
  <link name="rf_foot">
    <inertial>
      <origin xyz="0 0 0"/>
      <mass value="0.0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <visual>
      <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <sphere radius="0.021"/>
      </geometry>
      <!-- <material name="black"/> -->
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
    </collision>
  </link>
  <!--                 <gazebo reference="${name}_foot">
                	<material>Gazebo/Black</material>
                </gazebo> -->
  <!-- Extensions -->
  <!-- Hip assembly -->
  <transmission name="rf_haa_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rf_haa_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rf_haa_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Upper leg -->
  <transmission name="rf_hfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rf_hfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rf_hfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Lower leg -->
  <transmission name="rf_kfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rf_kfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rf_kfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="rf_haa_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="rf_kfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="rf_hfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="rf_upperleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="rf_lowerleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="rf_foot">
    <sensor name="rf_foot_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>1000.0</update_rate>
      <contact>
        <collision>rf_foot_collision</collision>
      </contact>
      <plugin filename="libgazebo_ros_bumper.so" name="rf_foot_bumper">
        <bumperTopicName>/rf_grf</bumperTopicName>
        <frameName>base_link</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <!-- LH leg -->
  <!-- Joints -->
  <!-- HAA joint -->
  <joint name="lh_haa_joint" type="revolute">
    <origin rpy="3.14159265359 1.57079632679 0" xyz="-0.4435 0.097 0"/>
    <parent link="trunk"/>
    <child link="lh_hipassembly"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0"/>
    <limit effort="120.0" lower="-0.698131700798" upper="0.698131700798" velocity="12.0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-0.698131700798" soft_upper_limit="0.698131700798"/>
  </joint>
  <!-- HFE joint -->
  <joint name="lh_hfe_joint" type="revolute">
    <origin rpy="1.57079632679 0 0" xyz="0 -0.117 0"/>
    <parent link="lh_hipassembly"/>
    <child link="lh_upperleg"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0"/>
    <limit effort="245.0" lower="-2.35619449019" upper="2.35619449019" velocity="12.0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-2.35619449019" soft_upper_limit="2.35619449019"/>
  </joint>
  <!-- KFE joint -->
  <joint name="lh_kfe_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.36 0 0"/>
    <parent link="lh_upperleg"/>
    <child link="lh_lowerleg"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0"/>
    <limit effort="250.0" lower="0.0349065850399" upper="2.91469985083" velocity="12.0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="0.0349065850399" soft_upper_limit="2.91469985083"/>
  </joint>
  <!-- Foot joint -->
  <joint name="lh_foot_joint" type="fixed">
    <origin rpy="1.57079632679 0 -1.57079632679" xyz="0.38 0 0"/>
    <parent link="lh_lowerleg"/>
    <child link="lh_foot"/>
  </joint>
  <!-- Links -->
  <!-- Hip assembly link -->
  <link name="lh_hipassembly">
    <inertial>
      <origin xyz="-0.000605 -0.001346 0.000196"/>
      <mass value="3.54"/>
      <inertia ixx="0.007379" ixy="-5.3e-05" ixz="1.7e-05" iyy="0.004284" iyz="3e-05" izz="0.00709"/>
    </inertial>
    <visual>
      <origin rpy="0 -1.57079632679 -1.57079632679" xyz="0 -0.046 0"/>
      <geometry>
        <!-- <mesh filename="package://hyq2max_description/meshes/leg/hipassembly.dae" scale="1 1 1"/> -->
        <cylinder length="0.117" radius="0.0444"/>
      </geometry>
      <!-- <material name="black"/> -->
    </visual>
    <collision>
      <origin rpy="0 -1.57079632679 -1.57079632679" xyz="0 -0.046 0"/>
      <geometry>
        <!-- <mesh filename="package://hyq2max_description/meshes/leg/hipassembly.dae" scale="1 1 1"/> -->
        <cylinder length="0.117" radius="0.0444"/>
      </geometry>
    </collision>
  </link>
  <!-- 		<gazebo reference="${name}_hipassembly">
            		<material>Gazebo/Black</material>
	        </gazebo> -->
  <!-- Upper leg link -->
  <link name="lh_upperleg">
    <inertial>
      <origin xyz="0.144296 0.002071 -0.005094"/>
      <mass value="4.95"/>
      <inertia ixx="0.010196" ixy="0.00232" ixz="-0.000141" iyy="0.204183" iyz="-3.4e-05" izz="0.207532"/>
    </inertial>
    <visual>
      <origin rpy="0.0 0 0" xyz="0 0 -0.03"/>
      <!-- <origin xyz="0.180 0 0" rpy="0 0 0"/> -->
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
        <!-- <box size="0.360 0.116 0.07"/> -->
        <!-- <cylinder length="0.360" radius="0.07"/> -->
      </geometry>
    </visual>
    <collision>
      <origin rpy="0.0 0 0" xyz="0 0 -0.03"/>
      <!-- <origin xyz="0.180 0 0" rpy="0 0 0"/> -->
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
        <!-- <box size="0.360 0.116 0.07"/> -->
        <!-- <cylinder length="0.360" radius="0.07"/> -->
      </geometry>
    </collision>
  </link>
  <!-- Lower leg link -->
  <link name="lh_lowerleg">
    <inertial>
      <origin xyz="0.109015 -0.042147 -0.000219"/>
      <mass value="1.71"/>
      <inertia ixx="0.006848" ixy="-0.011981" ixz="-8e-06" iyy="0.055957" iyz="1.2e-05" izz="0.059397"/>
    </inertial>
    <visual>
      <origin rpy="3.14159265359 0 3.31612557879" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="3.14159265359 0 3.31612557879" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Foot link -->
  <link name="lh_foot">
    <inertial>
      <origin xyz="0 0 0"/>
      <mass value="0.0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <visual>
      <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <sphere radius="0.021"/>
      </geometry>
      <!-- <material name="black"/> -->
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
    </collision>
  </link>
  <!--                 <gazebo reference="${name}_foot">
                	<material>Gazebo/Black</material>
                </gazebo> -->
  <!-- Extensions -->
  <!-- Hip assembly -->
  <transmission name="lh_haa_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lh_haa_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lh_haa_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Upper leg -->
  <transmission name="lh_hfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lh_hfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lh_hfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Lower leg -->
  <transmission name="lh_kfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="lh_kfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="lh_kfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="lh_haa_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="lh_kfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="lh_hfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="lh_upperleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="lh_lowerleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="lh_foot">
    <sensor name="lh_foot_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>1000.0</update_rate>
      <contact>
        <collision>lh_foot_collision</collision>
      </contact>
      <plugin filename="libgazebo_ros_bumper.so" name="lh_foot_bumper">
        <bumperTopicName>/lh_grf</bumperTopicName>
        <frameName>base_link</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <!-- RH leg -->
  <!-- Joints -->
  <!-- HAA joint -->
  <joint name="rh_haa_joint" type="revolute">
    <origin rpy="0 1.57079632679 0" xyz="-0.4435 -0.097 0"/>
    <parent link="trunk"/>
    <child link="rh_hipassembly"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0"/>
    <limit effort="120.0" lower="-0.698131700798" upper="0.698131700798" velocity="12.0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-0.698131700798" soft_upper_limit="0.698131700798"/>
  </joint>
  <!-- HFE joint -->
  <joint name="rh_hfe_joint" type="revolute">
    <origin rpy="-1.57079632679 0 0" xyz="0 -0.117 0"/>
    <parent link="rh_hipassembly"/>
    <child link="rh_upperleg"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0"/>
    <limit effort="245.0" lower="-2.35619449019" upper="2.35619449019" velocity="12.0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="-2.35619449019" soft_upper_limit="2.35619449019"/>
  </joint>
  <!-- KFE joint -->
  <joint name="rh_kfe_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.36 0 0"/>
    <parent link="rh_upperleg"/>
    <child link="rh_lowerleg"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0"/>
    <limit effort="250.0" lower="0.0349065850399" upper="2.91469985083" velocity="12.0"/>
    <safety_controller k_position="100" k_velocity="100" soft_lower_limit="0.0349065850399" soft_upper_limit="2.91469985083"/>
  </joint>
  <!-- Foot joint -->
  <joint name="rh_foot_joint" type="fixed">
    <origin rpy="1.57079632679 0 -1.57079632679" xyz="0.38 0 0"/>
    <parent link="rh_lowerleg"/>
    <child link="rh_foot"/>
  </joint>
  <!-- Links -->
  <!-- Hip assembly link -->
  <link name="rh_hipassembly">
    <inertial>
      <origin xyz="-0.000605 -0.001346 0.000196"/>
      <mass value="3.54"/>
      <inertia ixx="0.007379" ixy="-5.3e-05" ixz="1.7e-05" iyy="0.004284" iyz="3e-05" izz="0.00709"/>
    </inertial>
    <visual>
      <origin rpy="0 -1.57079632679 -1.57079632679" xyz="0 -0.046 0"/>
      <geometry>
        <!-- <mesh filename="package://hyq2max_description/meshes/leg/hipassembly.dae" scale="1 1 1"/> -->
        <cylinder length="0.117" radius="0.0444"/>
      </geometry>
      <!-- <material name="black"/> -->
    </visual>
    <collision>
      <origin rpy="0 -1.57079632679 -1.57079632679" xyz="0 -0.046 0"/>
      <geometry>
        <!-- <mesh filename="package://hyq2max_description/meshes/leg/hipassembly.dae" scale="1 1 1"/> -->
        <cylinder length="0.117" radius="0.0444"/>
      </geometry>
    </collision>
  </link>
  <!-- 		<gazebo reference="${name}_hipassembly">
            		<material>Gazebo/Black</material>
	        </gazebo> -->
  <!-- Upper leg link -->
  <link name="rh_upperleg">
    <inertial>
      <origin xyz="0.144296 0.002071 0.005094"/>
      <mass value="4.95"/>
      <inertia ixx="0.010196" ixy="0.00232" ixz="0.000141" iyy="0.204183" iyz="3.4e-05" izz="0.207532"/>
    </inertial>
    <visual>
      <origin rpy="3.14159265359 0 0" xyz="0 0 0.03"/>
      <!-- <origin xyz="0.180 0 0" rpy="0 0 0"/> -->
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
        <!-- <box size="0.360 0.116 0.07"/> -->
        <!-- <cylinder length="0.360" radius="0.07"/> -->
      </geometry>
    </visual>
    <collision>
      <origin rpy="3.14159265359 0 0" xyz="0 0 0.03"/>
      <!-- <origin xyz="0.180 0 0" rpy="0 0 0"/> -->
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/upperleg.dae" scale="1 1 1"/>
        <!-- <box size="0.360 0.116 0.07"/> -->
        <!-- <cylinder length="0.360" radius="0.07"/> -->
      </geometry>
    </collision>
  </link>
  <!-- Lower leg link -->
  <link name="rh_lowerleg">
    <inertial>
      <origin xyz="0.109015 -0.042147 -0.000219"/>
      <mass value="1.71"/>
      <inertia ixx="0.006848" ixy="-0.011981" ixz="-8e-06" iyy="0.055957" iyz="1.2e-05" izz="0.059397"/>
    </inertial>
    <visual>
      <origin rpy="3.14159265359 0 3.31612557879" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="3.14159265359 0 3.31612557879" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://hyq2max_description/meshes/leg/lowerleg.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <!-- Foot link -->
  <link name="rh_foot">
    <inertial>
      <origin xyz="0 0 0"/>
      <mass value="0.0"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <visual>
      <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <sphere radius="0.021"/>
      </geometry>
      <!-- <material name="black"/> -->
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <sphere radius="0.02175"/>
      </geometry>
    </collision>
  </link>
  <!--                 <gazebo reference="${name}_foot">
                	<material>Gazebo/Black</material>
                </gazebo> -->
  <!-- Extensions -->
  <!-- Hip assembly -->
  <transmission name="rh_haa_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rh_haa_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rh_haa_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Upper leg -->
  <transmission name="rh_hfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rh_hfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rh_hfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <!-- Lower leg -->
  <transmission name="rh_kfe_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="rh_kfe_joint">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="rh_kfe_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo reference="rh_haa_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="rh_kfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="rh_hfe_joint">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="rh_upperleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="rh_lowerleg">
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>1.5</mu1>
    <mu2>1.5</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
  </gazebo>
  <gazebo reference="rh_foot">
    <sensor name="rh_foot_contact_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>1000.0</update_rate>
      <contact>
        <collision>rh_foot_collision</collision>
      </contact>
      <plugin filename="libgazebo_ros_bumper.so" name="rh_foot_bumper">
        <bumperTopicName>/rh_grf</bumperTopicName>
        <frameName>base_link</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <!-- IMU trunk -->
  <!-- Joint -->
  <joint name="trunk_imu_joint" type="fixed">
    <origin rpy="0 -3.14159265359 0" xyz="0.005 0 0.00125"/>
    <parent link="trunk"/>
    <child link="trunk_imu"/>
  </joint>
  <!-- Link -->
  <link name="trunk_imu">
    <inertial>
      <origin xyz="-0.00020  0.00010  0.00110"/>
      <mass value="0.018"/>
      <inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0.00485 0 -0.00105"/>
      <geometry>
        <box size="0.0329 0.0244 0.0111"/>
      </geometry>
      <material name="black">
        <color rgba="0 0 0 0.9"/>
      </material>
    </visual>
  </link>
  <!-- IMU Gazebo plugin definition -->
  <gazebo>
    <plugin filename="libgazebo_ros_imu.so" name="trunk_imu_controller">
      <alwaysOn>true</alwaysOn>
      <updateRate>1000</updateRate>
      <bodyName>trunk_imu</bodyName>
      <topicName>trunk_imu/data</topicName>
      <gaussianNoise>4e-08</gaussianNoise>
      <xyzOffset>0 0 0</xyzOffset>
      <rpyOffset>0 0 0</rpyOffset>
      <serviceName>/trunk_imu_imu</serviceName>
    </plugin>
  </gazebo>
  <!-- Imu definition required for DLS hardware interface of ros control -->
  <gazebo reference="trunk_imu">
    <sensor name="trunk_imu" type="imu">
      <always_on>1</always_on>
      <update_rate>1000</update_rate>
      <imu>
        <noise>
          <type>gaussian</type>
          <rate>
            <mean>0</mean>
            <stddev>0.0002</stddev>
            <bias_mean>0.00087</bias_mean>
            <bias_stddev>8e-07</bias_stddev>
          </rate>
          <accel>
            <mean>0</mean>
            <stddev>0.017</stddev>
            <bias_mean>0.002</bias_mean>
            <bias_stddev>0.001</bias_stddev>
          </accel>
        </noise>
      </imu>
    </sensor>
  </gazebo>
  <!-- Velodyne -->
  <!--	<xacro:velodyne
		name="trunk_mount"
		parent="trunk">
		<origin xyz="0.39 0 0.269" rpy="0 0 0"/>
	</xacro:velodyne>-->
  <!-- PTU unit -->
  <!--	<xacro:ptu_d46
		name="ptu"
		parent="trunk">
		<origin xyz="0.657353 0.015447 0.119533" rpy="-0.013127 0.569257 -0.007748"/>
	</xacro:ptu_d46>-->
  <!-- Asus Xtion Pro -->
  <!--<origin xyz="0 0.005 0.036" rpy="0 0 0"/> with Bumblebee setup -->
  <!--<origin xyz="0 0 0.04397" rpy="0 0 0"/> with Vislab setup -->
  <!--	<xacro:asus_xtion_camera
		name="head_mount"
		parent="ptu_mount_link">
		<origin xyz="0 0.005 0.036" rpy="0 0 0"/>
	</xacro:asus_xtion_camera>-->
  <!-- Kinect -->
  <!-- is no more used, but we keep it for compatibilty -->
  <!--xacro:kinect_camera
		name="head_mount"
		parent="trunk">
		<origin xyz="0.63 0 0.095" rpy="0 0 0"/>
	</xacro:kinect_camera-->
  <!-- Bumblebee -->
  <!--	<xacro:bumblebee_97
		parent_link="ptu_mount_link"
		xyz="0 0 0.018"
		rpy="0 0 0"
		ns="bumblebee"
		frame_prefix="bumblebee_"
		high_res="false"/>-->
  <!--	<xacro:vislab_3dve_72
		name="vislab_3dve"
		parent="ptu_mount_link"
		xyz="0 0 0.025"
		rpy="0 0 0"
		high_res="false"/>-->
</robot>
